(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{106:function(e,t,a){},107:function(e,t,a){},108:function(e,t,a){"use strict";a.r(t);var n,r=a(24);!function(e){e.TransactionAdd="TRANSACTION.ADD",e.CurrentUserLoaded="CURRENT_USER.LOADED",e.BudgetLoaded="BUDGET.LOADED"}(n||(n={}));var c=a(0),o=a.n(c),i=a(17),u=a(25),l={},s=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:l,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"TRANSACTION.ADD":if(!e.budget||!e.budget.periods.length)return e;var a=e.budget.periods.slice(-1)[0],n=e.budget.periods.slice(0,-1),r=[].concat(Object(u.a)(a.transactions),[t.payload.transaction]),c=Object(i.a)({},a,{transactions:r}),o=[].concat(Object(u.a)(n),[c]);return Object(i.a)({},e,{budget:Object(i.a)({},e.budget,{periods:o})});case"CURRENT_USER.LOADED":return Object(i.a)({},e,{me:t.payload.user});case"BUDGET.LOADED":return Object(i.a)({},e,{budget:t.payload.budget});default:return e}},d=Object(c.createContext)({state:l,actionCreators:{}}),m=a(9),g=a.n(m),f=a(6),p=a(140),b=a(141),E=a(142),v=a(59),h=function(e){var t=e.className,a=void 0===t?"":t;return o.a.createElement(v.a,{className:a},o.a.createElement("path",{d:"M21.35,11.1H12.18V13.83H18.69C18.36,17.64 15.19,19.27 12.19,19.27C8.36,19.27 5,16.25 5,12C5,7.9 8.2,4.73 12.2,4.73C15.29,4.73 17.1,6.7 17.1,6.7L19,4.72C19,4.72 16.56,2 12.1,2C6.42,2 2.03,6.8 2.03,12C2.03,17.05 6.16,22 12.25,22C17.6,22 21.5,18.33 21.5,12.91C21.5,11.76 21.35,11.1 21.35,11.1V11.1Z"}))},O=a(39),j=function(){return Object(c.useEffect)(function(){var e=new O.auth.GoogleAuthProvider;O.auth().signInWithRedirect(e)},[]),null},C=Object(f.a)(function(e){return{paper:{padding:"16px",textAlign:"center"},icon:{marginRight:"12px"}}})(function(e){var t=e.classes,a=void 0===t?{}:t,n=Object(c.useState)("notSelected"),i=Object(r.a)(n,2),u=i[0],l=i[1];switch(u){case"google":return o.a.createElement(j,null);default:return o.a.createElement(p.a,{container:!0,spacing:4,justify:"center",alignItems:"center"},o.a.createElement(p.a,{item:!0,xs:12},o.a.createElement(b.a,{className:a.paper},o.a.createElement("h1",null,"Budgeteering"))),o.a.createElement(p.a,{item:!0,xs:12},o.a.createElement(b.a,{className:a.paper},o.a.createElement("h3",null,"Choose your login provider..."))),o.a.createElement(p.a,{item:!0,xs:12},o.a.createElement(b.a,{className:a.paper},o.a.createElement(E.a,{color:"primary",variant:"extended",onClick:function(){l("google")}},o.a.createElement(h,{className:a.icon}),"Login with Google"))))}}),y=a(36),w=a.n(y),A=a(45),N=a(143),x=a(147),S=a(146),T=a(144),k=a(145),R=function(e){return e.map(function(e){return o.a.createElement(k.a,{id:e.id},o.a.createElement(S.a,null,e.amount),o.a.createElement(S.a,null,e.transactor.name),o.a.createElement(S.a,null,e.category),o.a.createElement(S.a,null,e.note))})},D=function(e){return o.a.createElement(N.a,null,o.a.createElement(T.a,null,o.a.createElement(k.a,null,o.a.createElement(S.a,null,"Amount"),o.a.createElement(S.a,null,"User Name"),o.a.createElement(S.a,null,"Category"),o.a.createElement(S.a,null,"Note"))),o.a.createElement(x.a,null,R(e.transactions)))},L=Object(f.a)(function(e){return{heading:{color:"#b3b3b3",fontSize:16,fontWeight:"bold",margin:"0.25em"},remainingAmount:{fontWeight:"bold",fontSize:32,margin:"0.25em"}}})(function(e){var t=e.transactions,a=e.startingAmount,n=e.classes,r=void 0===n?{}:n,c=a-t.reduce(function(e,t){return e+t.amount},0);return o.a.createElement(p.a,{container:!0},o.a.createElement(p.a,{item:!0,xs:12},o.a.createElement("p",{className:r.heading},"Remaining")),o.a.createElement(p.a,{item:!0,xs:12},o.a.createElement("p",{className:r.remainingAmount},c)))}),U=a(148),B=a(149),I=a(69),z=a.n(I),J=a(66),W=a(67),G=a.n(W),V=function(e){var t=e.onSubmit,a=Object(c.useState)(""),n=Object(r.a)(a,2),u=n[0],l=n[1],s=Object(c.useState)(""),m=Object(r.a)(s,2),g=m[0],f=m[1],b=Object(c.useState)(""),E=Object(r.a)(b,2),v=E[0],h=E[1],O=function(e){var t=e.me,a=(t.accessToken,Object(J.a)(t,["accessToken"]));return Object(i.a)({},a)}(Object(c.useContext)(d).state),j=function(e){var a=parseFloat(u),n=isNaN(a)?0:a;t({id:G()(),amount:n,transactor:O,category:g,note:v}),l(""),f(""),h("")};return o.a.createElement(p.a,{container:!0,spacing:4,justify:"center",alignItems:"center"},o.a.createElement(p.a,{item:!0},o.a.createElement(B.a,{label:"Amount",value:u,onChange:function(e){l(e.currentTarget.value)}})),o.a.createElement(p.a,{item:!0},o.a.createElement(B.a,{label:"Category",value:g,onChange:function(e){f(e.currentTarget.value)}})),o.a.createElement(p.a,{item:!0},o.a.createElement(B.a,{label:"Note",value:v,onChange:function(e){h(e.currentTarget.value)}})),o.a.createElement(p.a,{item:!0},o.a.createElement(U.a,{variant:"contained",color:"primary",size:"medium",onClick:function(e){j()}},o.a.createElement(z.a,null),"Spend")))},Z=a(52);a(104),a(105);Z.initializeApp({apiKey:"AIzaSyBZn-wkt-nRt9TwSZnvKd28jT4vy7ySgm4",authDomain:"budgeteering-70f5d.firebaseapp.com",databaseURL:"https://budgeteering-70f5d.firebaseio.com",projectId:"budgeteering-70f5d",storageBucket:"budgeteering-70f5d.appspot.com",messagingSenderId:"473484708291",appId:"1:473484708291:web:bf62d1245ff200c0"});var F,H=Z.firestore(),K=function(){var e=Object(A.a)(w.a.mark(function e(t){var a,n;return w.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,H.collection("budget").doc(t).get();case 2:if(a=e.sent,n=a.data()){e.next=6;break}return e.abrupt("return",null);case 6:return e.abrupt("return",n);case 7:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),M=function(e){return H.doc("budget/".concat(e.id)).update(e)},P=function(e,t){var a=_(e),n=Y(e),r=[].concat(Object(u.a)(n.transactions),[t]),c=Object(i.a)({},n,{transactions:r});return Object(i.a)({},e,{periods:[].concat(Object(u.a)(a),[c])})},Y=function(e){return e.periods.slice(-1)[0]},_=function(e){return e.periods.slice(0,-1)},$=Object(f.a)(function(e){return{paper:{padding:"16px",textAlign:"center"}}})(function(e){var t=e.classes,a=void 0===t?{}:t,n=Object(c.useContext)(d),r=n.state,i=n.actionCreators,u=function(e){return e.budget}(r),l=function(e){return e.budget?e.budget.periods[e.budget.periods.length-1]:null}(r),s=l?l.transactions:[],m=l?l.startingAmount:0;if(Object(c.useEffect)(function(){var e,t;return e="hb9zADJBVAd6Y3akSCig",t=function(e){var t=e.data();t&&i.budgetLoaded(t)},F=H.collection("budget").doc(e).onSnapshot(t),K("hb9zADJBVAd6Y3akSCig").then(function(e){e&&i.budgetLoaded(e)}),function(){F()}},[]),!u)return null;var g=function(){var e=Object(A.a)(w.a.mark(function e(t){var a;return w.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:a=P(u,t),M(a);case 2:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}();return o.a.createElement(p.a,{container:!0,spacing:4,justify:"center",alignItems:"center"},o.a.createElement(p.a,{item:!0,xs:12},o.a.createElement(b.a,{className:a.paper},o.a.createElement("h1",null,"Budgeteering"))),o.a.createElement(p.a,{item:!0,xs:12},o.a.createElement(b.a,{className:a.paper},o.a.createElement(L,{transactions:s,startingAmount:m}))),o.a.createElement(p.a,{item:!0,xs:12},o.a.createElement(b.a,{className:a.paper},o.a.createElement(V,{onSubmit:g}))),o.a.createElement(p.a,{item:!0,xs:12},o.a.createElement(b.a,{className:a.paper},o.a.createElement(D,{transactions:s}))))}),q=function(){var e=Object(c.useContext)(d).actionCreators;Object(c.useEffect)(function(){O.auth().getRedirectResult().then(function(t){if(!t.credential||!t.user)throw Error("Sign in does not have all info or was not started!");var a=t.credential;if(!a.accessToken)throw Error("No access token for user!");var n=t.user,r=n.uid,c=n.displayName,o=n.email;e.currentUserLoaded({id:r,name:c||o||"Anonymous User",email:o||"",accessToken:a.accessToken})}).catch(function(e){var t=e.code,a=e.message,n=e.email,r=e.credential;console.warn("Failed to log user in. Code: ".concat(t,"  Message: ").concat(a,"  Email: ").concat(n,"  Cred: ").concat(JSON.stringify(r)))})},[])},Q=(a(106),Object(f.a)(function(e){return{appRoot:{backgroundColor:"#f5f5f5",height:"100%",width:"100%"}}})(function(e){var t=e.classes,a=void 0===t?{}:t,n=function(e){return e.me}(Object(c.useContext)(d).state);q();var r=n?o.a.createElement($,null):o.a.createElement(C,null);return o.a.createElement("div",{className:a.appRoot},r)}));a(107),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));g.a.render(o.a.createElement(function(e){var t=e.children,a=Object(c.useReducer)(s,l),i=Object(r.a)(a,2),u=i[0],m=function(e,t){return{addTransaction:function(e){return t({type:n.TransactionAdd,payload:{transaction:e}})},currentUserLoaded:function(e){return t({type:n.CurrentUserLoaded,payload:{user:e}})},budgetLoaded:function(e){return t({type:n.BudgetLoaded,payload:{budget:e}})}}}(0,i[1]);return Object(c.useEffect)(function(){console.log({newState:u})},[u]),o.a.createElement(d.Provider,{value:{state:u,actionCreators:m}},t)},null,o.a.createElement(Q,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},74:function(e,t,a){e.exports=a(108)}},[[74,1,2]]]);
//# sourceMappingURL=main.15880dfe.chunk.js.map